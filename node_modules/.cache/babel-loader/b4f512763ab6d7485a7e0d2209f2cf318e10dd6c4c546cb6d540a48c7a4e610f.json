{"ast":null,"code":"import React,{useState,useEffect}from\"react\";import{Dialog,DialogActions,DialogContent,DialogTitle,Button,TextField,MenuItem}from\"@mui/material\";import{API_URL}from'../services/api';// Importa la constante API_URL\nimport{jsxs as _jsxs,jsx as _jsx}from\"react/jsx-runtime\";function AsignarAdministrador(_ref){let{open,handleClose,handleSave=()=>{},adminData}=_ref;const[gimnasios,setGimnasios]=useState([]);const[selectedGym,setSelectedGym]=useState(\"\");const[loading,setLoading]=useState(false);// Para mostrar carga en bot칩n\nuseEffect(()=>{const fetchGimnasios=async()=>{try{const token=localStorage.getItem(\"token\");if(!token)return;const response=await fetch(`${API_URL}/api/Gimnacios`,{headers:{Authorization:`Bearer ${token}`,Accept:\"application/json\"}});if(!response.ok)throw new Error(\"Error al obtener gimnasios\");const data=await response.json();setGimnasios(data);}catch(error){console.error(error);}};fetchGimnasios();},[]);const handleAssign=async()=>{try{setLoading(true);const token=localStorage.getItem(\"token\");const response=await fetch(`${API_URL}/api/Administradores/asignar`,{method:\"POST\",headers:{Authorization:`Bearer ${token}`,\"Content-Type\":\"application/json\"},body:JSON.stringify({adminUserId:adminData.adminUserId,gimnacioId:parseInt(selectedGym)})});if(!response.ok)throw new Error(\"Error al asignar administrador\");// 游댳 Llamamos a handleSave para actualizar la lista sin recargar manualmente\nhandleSave();// 游댳 Cierra el modal autom치ticamente al asignar\nhandleClose();}catch(error){console.error(error);}finally{setLoading(false);}};return/*#__PURE__*/_jsxs(Dialog,{open:open,onClose:handleClose,fullWidth:true,children:[/*#__PURE__*/_jsxs(DialogTitle,{children:[\"Asignar Gimnasio a \",adminData===null||adminData===void 0?void 0:adminData.email]}),/*#__PURE__*/_jsx(DialogContent,{children:/*#__PURE__*/_jsx(TextField,{select:true,label:\"Selecciona un gimnasio\",fullWidth:true,value:selectedGym,onChange:e=>setSelectedGym(e.target.value),variant:\"outlined\",margin:\"normal\",children:gimnasios.map(gym=>/*#__PURE__*/_jsx(MenuItem,{value:gym.id,children:gym.nombre},gym.id))})}),/*#__PURE__*/_jsxs(DialogActions,{children:[/*#__PURE__*/_jsx(Button,{onClick:handleClose,color:\"secondary\",children:\"Cancelar\"}),/*#__PURE__*/_jsx(Button,{onClick:handleAssign,color:\"primary\",variant:\"contained\",disabled:!selectedGym||loading// Deshabilita si est치 cargando\n,children:loading?\"Asignando...\":\"Asignar\"})]})]});}export default AsignarAdministrador;","map":{"version":3,"names":["React","useState","useEffect","Dialog","DialogActions","DialogContent","DialogTitle","Button","TextField","MenuItem","API_URL","jsxs","_jsxs","jsx","_jsx","AsignarAdministrador","_ref","open","handleClose","handleSave","adminData","gimnasios","setGimnasios","selectedGym","setSelectedGym","loading","setLoading","fetchGimnasios","token","localStorage","getItem","response","fetch","headers","Authorization","Accept","ok","Error","data","json","error","console","handleAssign","method","body","JSON","stringify","adminUserId","gimnacioId","parseInt","onClose","fullWidth","children","email","select","label","value","onChange","e","target","variant","margin","map","gym","id","nombre","onClick","color","disabled"],"sources":["/Users/fernandovargas/Documents/GitHub/gymfront/src/components/AsignarAdministrador.js"],"sourcesContent":["import React, { useState, useEffect } from \"react\";\nimport {\n  Dialog,\n  DialogActions,\n  DialogContent,\n  DialogTitle,\n  Button,\n  TextField,\n  MenuItem,\n} from \"@mui/material\";\nimport { API_URL } from '../services/api'; // Importa la constante API_URL\n\nfunction AsignarAdministrador({ open, handleClose, handleSave = () => {}, adminData }) {\n  const [gimnasios, setGimnasios] = useState([]);\n  const [selectedGym, setSelectedGym] = useState(\"\");\n  const [loading, setLoading] = useState(false); // Para mostrar carga en bot칩n\n\n  useEffect(() => {\n    const fetchGimnasios = async () => {\n      try {\n        const token = localStorage.getItem(\"token\");\n        if (!token) return;\n\n        const response = await fetch(`${API_URL}/api/Gimnacios`, {\n          headers: { Authorization: `Bearer ${token}`, Accept: \"application/json\" },\n        });\n\n        if (!response.ok) throw new Error(\"Error al obtener gimnasios\");\n\n        const data = await response.json();\n        setGimnasios(data);\n      } catch (error) {\n        console.error(error);\n      }\n    };\n\n    fetchGimnasios();\n  }, []);\n\n  const handleAssign = async () => {\n    try {\n      setLoading(true);\n      const token = localStorage.getItem(\"token\");\n\n      const response = await fetch(`${API_URL}/api/Administradores/asignar`, {\n        method: \"POST\",\n        headers: {\n          Authorization: `Bearer ${token}`,\n          \"Content-Type\": \"application/json\",\n        },\n        body: JSON.stringify({\n          adminUserId: adminData.adminUserId,\n          gimnacioId: parseInt(selectedGym),\n        }),\n      });\n\n      if (!response.ok) throw new Error(\"Error al asignar administrador\");\n\n      // 游댳 Llamamos a handleSave para actualizar la lista sin recargar manualmente\n      handleSave();  \n\n      // 游댳 Cierra el modal autom치ticamente al asignar\n      handleClose(); \n    } catch (error) {\n      console.error(error);\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  return (\n    <Dialog open={open} onClose={handleClose} fullWidth>\n      <DialogTitle>Asignar Gimnasio a {adminData?.email}</DialogTitle>\n      <DialogContent>\n        <TextField\n          select\n          label=\"Selecciona un gimnasio\"\n          fullWidth\n          value={selectedGym}\n          onChange={(e) => setSelectedGym(e.target.value)}\n          variant=\"outlined\"\n          margin=\"normal\"\n        >\n          {gimnasios.map((gym) => (\n            <MenuItem key={gym.id} value={gym.id}>\n              {gym.nombre}\n            </MenuItem>\n          ))}\n        </TextField>\n      </DialogContent>\n      <DialogActions>\n        <Button onClick={handleClose} color=\"secondary\">Cancelar</Button>\n        <Button \n          onClick={handleAssign} \n          color=\"primary\" \n          variant=\"contained\" \n          disabled={!selectedGym || loading} // Deshabilita si est치 cargando\n        >\n          {loading ? \"Asignando...\" : \"Asignar\"}\n        </Button>\n      </DialogActions>\n    </Dialog>\n  );\n}\n\nexport default AsignarAdministrador;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}